// ุฎู ุฎุจ! ุจุงุฏ ุฎู ุณุงุฏู ู ูุฎุตูุต ูุฑุงูุชโุงูุฏ (React) ุชูุถุญ ุจุฏู ฺฉู JWT ฺู ู ฺุทูุฑ ฺฉุงุฑ ูโฺฉูู. ูุซู ุขุจ ุฎูุฑุฏู ูโููู! ๐

// ---

// ### ๐ JWT ุฏุฑ ฺฉ ูฺฏุงู (ูุซู ฺฉุงุฑุช ูุชุฑู!)
// ูุฑุถ ฺฉู ุชู ฺฉุงุฑุช ูุชุฑู ุฏุงุฑ:
// - ๐ซ ฺฉุงุฑุช (JWT): ฺฉ ฺฉุฏ ุจโูุนู ุจุฑุง ุฏฺฏุฑุงูุ ุงูุง ุณุณุชู ูุชุฑู ูโูููุฏุด.
// - ๐ ุงุทูุงุนุงุช ุฏุงุฎูุด: ูุซูุงู "ุงู ฺฉุงุฑุจุฑ ุชุง ฑ ููุชู ูุนุชุจุฑู" (ูุซู { userId: 123 }).
// - ๐ ุงูุถุง ูุชุฑู: ฺฉ ููุฑ ุงููุช ฺฉู ููโุดูุฏ ุฌุนูุด ฺฉุฑุฏ.

// ---

// ### ๐ง ุฏุฑ ูุฑุงูุชโุงูุฏ (React) ฺุทูุฑ ฺฉุงุฑ ูโฺฉููุ
// ฑ. ูุงฺฏู ูโฺฉู (ุงูู/ูพุณูุฑุฏ ุจู ุณุฑูุฑ ูโูุฑุณุช).  
// ฒ. ุณุฑูุฑ ฺฉ JWT ุจู ุชู ูโุฏูุฏ (ูุซู ฺฉ ฺฉุงุฑุช ูุชุฑู).  
// ณ. ุชู ุงู JWT ุฑุง ุฐุฎุฑู ูโฺฉู (ุฏุฑ localStorage ุง Cookies).  
// ด. ุฏุฑ ูุฑ ุฏุฑุฎูุงุณุช ุจุนุฏุ JWT ุฑุง ุจู ุณุฑูุฑ ูโูุฑุณุช (ูุซู ูุดุงู ุฏุงุฏู ฺฉุงุฑุช ูุชุฑู ุจู ูุฃููุฑ).  
// ต. ุณุฑูุฑ JWT ุฑุง ุจุฑุฑุณ ูโฺฉูุฏ ู ุงฺฏุฑ ูุนุชุจุฑ ุจุงุดุฏุ ุฏุงุฏู ุฑุง ูโูุฑุณุชุฏ.

// ---

// ### ๐ป ฺฉุฏ ูุงูุน ุฏุฑ React

// #### ฑ. ุฐุฎุฑู ุชูฺฉู ุจุนุฏ ุงุฒ ูุงฺฏู
// ุจุนุฏ ุงุฒ ุฏุฑุงูุช ุชูฺฉู ุงุฒ ุณุฑูุฑ:
// const response1 = await axios.post('/login', { email, password });
// localStorage.setItem('token', response.data.token); // ุฐุฎุฑู ุชูฺฉู
// #### ฒ. ูุฑุณุชุงุฏู ุชูฺฉู ุจุง ูุฑ ุฏุฑุฎูุงุณุช
// ูุซูุงู ุจุฑุง ุฏุฑุงูุช ูพุฑููุงู ฺฉุงุฑุจุฑ:
const token1 = localStorage.getItem('token');
// const response = await axios.get('/profile', {
//   headers: {
//     'Authorization': `Bearer ${token}` // ุชูฺฉู ุฑุง ูโูุฑุณุชู
//   }
// });
// #### ณ. ุจุฑุฑุณ ุชูฺฉู ุฏุฑ ูุฑุงูุช (ุงุฎุชุงุฑ)
// ูุซูุงู ฺฺฉ ฺฉูู ฺฉุงุฑุจุฑ ูุงฺฏู ูุณุช ุง ูู:
// import jwtDecode from 'jwt-decode'; // ูุตุจ ุจุง: npm install jwt-decode

const token = localStorage.getItem('token');
if (token) {
  // const decoded = jwtDecode(token); // ุฏฺฉุฏ ฺฉุฑุฏู JWT
  // console.log(decoded.userId); // ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ
  // const isExpired = decoded.exp < Date.now() / 1000; // ุงููุถุง ฺฺฉ ุดูุฏ
}
// ---

// ### โ ฺุฑุง JWT ุจูุชุฑ ุงุฒ Session ูุนููู ุงุณุชุ
// - ูุฑุงูุชโุงูุฏ ูุณุชูู ุงุณุช: ูุซูุงู ุงฺฏุฑ ุจฺฉโุงูุฏ ุงุฒ ฺฉุงุฑ ุจูุชุฏุ ฺฉุงุฑุจุฑุงู ููฺูุงู ุชูฺฉู ูุนุชุจุฑ ุฏุงุฑูุฏ (ุชุง ุฒูุงู ุงููุถุง).  
// - ููุงุณโูพุฐุฑ: ุจุฑุง ููุจุงู/ุขูุช ููุงุณุจ ุงุณุช (ูุงุฒ ุจู ฺฉูฺฉ ูุณุช).  
// - ฺฉูุชุฑ ุจู ุจฺฉโุงูุฏ ูุชฺฉ ุงุณุช: ูุฑ ุณุฑูุฑ ูโุชูุงูุฏ JWT ุฑุง ุจุฑุฑุณ ฺฉูุฏ (ุงฺฏุฑ ฺฉูุฏ ุฑุง ุฏุงุดุชู ุจุงุดุฏ).

// ---

// ### โ๏ธ ูฺฉุงุช ุงููุช
// - ูุฑฺฏุฒ JWT ุฑุง ุฏุฑ ฺฉุฏ ูุฑุงูุช ุจู ุตูุฑุช ูุงุฑุฏฺฉุฏ ูฺฏุฐุงุฑุฏ (ูุญุฑูุงูู ูุณุช!).  
// - **ุชุฑุฌุญุงู ุฏุฑ httpOnly Cookie ุฐุฎุฑู ฺฉูุฏ** (ุงฺฏุฑ ูฺฏุฑุงู XSS ูุณุชุฏ). ุชูฺฉูโูุง ุชุงุฑุฎ ฺฏุฐุดุชู ุฑุง ูพุงฺฉ ฺฉูุฏุฏ**.

// ---

// ###ูุซุงู ูุงูุน ุจุง React + APIPI**
// ฑ. ฺฉุงุฑุจุฑ ูุงฺฏู ูโฺฉูุฏ โ ุชูฺฉู ูโฺฏุฑุฏ.  
// ฒ. ุชูฺฉู ุฏุฑ localStorage ุฐุฎุฑู ูโุดูุฏ.  
// ณ. ุจุง ูุฑ ุฏุฑุฎูุงุณุช ุจู APIุ ุชูฺฉู ุฏุฑ ูุฏุฑ ูโุฑูุฏ.  
// ด. ุงฺฏุฑ ุชูฺฉู ูููุถ ุดุฏุ ฺฉุงุฑุจุฑ ุฑุง ุจู ุตูุญู ูุงฺฏู ูุฏุงุช ฺฉู.

// -ุญุงูุง ูููุฏ JWT ฺูุูุ** ุงฺฏุฑ ููุทูโุง ูุจูู ูุณุช ุจฺฏู ุชุง ุจุดุชุฑ ุชูุถุญ ุจุฏู! ๐
// ### ๐ Refresh Token ุฏุฑ ฺฉ ูฺฏุงู ุณุงุฏู (ูุซู ฺฉุงุฑุช ูุชุฑู + ุงุดุชุฑุงฺฉ ูุงูุงูู!)
// ูุฑุถ ฺฉู JWT (ุชูฺฉู ุงุตู) ูุซู ุจูุท ฺฉโุจุงุฑ ูุตุฑู ูุชุฑู ุงุณุช ฺฉู ูุซูุงู ฑ ุณุงุนุช ุงุนุชุจุงุฑ ุฏุงุฑุฏ.  
// ุงูุง Refresh Token ูุซู ุงุดุชุฑุงฺฉ ูุงูุงูู ูุชุฑู ุงุณุช ฺฉู ุจุง ุขู ูโุชูุงู ุจูุท ุฌุฏุฏ ุจฺฏุฑ ุจุฏูู ุงูฺฉู ุฏูุจุงุฑู ูพูู ุจุฏู (ูุงฺฏู ฺฉู)!

// ---

// ### ๐ ฺุฑุง Refresh Token ูุงุฒู ุงุณุชุ
// - ุชูฺฉู ุงุตู (JWT) ุนูุฑ ฺฉูุชุงู ุฏุงุฑุฏ (ูุซูุงู ฑ ุณุงุนุช) ุจุฑุง ุงููุช ุจุดุชุฑ.  
// - ุจุนุฏ ุงุฒ ุงููุถุงุ ฺฉุงุฑุจุฑ ูุจุงุฏ ุฏูุจุงุฑู ูุงฺฏู ฺฉูุฏ! ุงูุฌุง Refresh Token ุจู ฺฉูฺฉ ูโุขุฏ.  
// - Refresh Token ุนูุฑ ุทููุงูโุชุฑ ุฏุงุฑุฏ (ูุซูุงู ท ุฑูุฒ) ู ุฏุฑ ุณุฑูุฑ ุฐุฎุฑู ูโุดูุฏ.

// ---

// ### ๐ง ฺุทูุฑ ฺฉุงุฑ ูโฺฉูุฏุ (ุฏุฑ ูุฑุงูุชโุงูุฏ)
// ฑ. ุงููู ูุงฺฏู:  
//    - ุณุฑูุฑ ุฏู ฺุฒ ูโุฏูุฏ:  
     // - โ Access Token (JWT ุงุตู - ุงุนุชุจุงุฑ ฺฉูุชุงู) โ ุฐุฎุฑู ุฏุฑ ุญุงูุธู (ูุซูุงู localStorage).  
     // - ๐ Refresh Token (ุงุนุชุจุงุฑ ุทููุงู) โ ุฐุฎุฑู ุฏุฑ httpOnly Cookie (ุงููโุชุฑ).  

  
   // ูพุงุณุฎ ุณุฑูุฑ ุจุนุฏ ุงุฒ ูุงฺฏู:
   let request = {
     accessToken: "xyz123...", // ุนูุฑ ฺฉูุชุงู
     refreshToken: "abc456..." // ุนูุฑ ุทููุงู
   }
   
// ฒ. ููุช Access Token ูููุถ ุดุฏ:  
//    - ูุฑุงูุชโุงูุฏ ุจู ุฌุง ูุงฺฏู ูุฌุฏุฏุ Refresh Token ุฑุง ุจู ุณุฑูุฑ ูโูุฑุณุชุฏ.  
//    - ุณุฑูุฑ ุงฺฏุฑ Refresh Token ูุนุชุจุฑ ุจุงุดุฏุ ฺฉ Access Token ุฌุฏุฏ ูโุฏูุฏ.  

  
   // ุฏุฑุฎูุงุณุช ุจุฑุง ุชูฺฉู ุฌุฏุฏ:
   // const axiosResponse = await axios.post('/refresh-token', {
     // refreshToken: cookies.get('refreshToken') // ุงุฑุณุงู Refresh Token
   // });
   // const newAccessToken = response.data.accessToken; // ุชูฺฉู ุฌุฏุฏ
   // localStorage.setItem('token', newAccessToken); // ุฐุฎุฑู ุชูฺฉู ุฌุฏุฏ
   
// 3. ุงฺฏุฑ Refresh Token ูู ูููุถ ุดุฏ:  
//    - ฺฉุงุฑุจุฑ ุจุงุฏ ุฏูุจุงุฑู ูุงฺฏู ฺฉูุฏ (ุงุดุชุฑุงฺฉุด ุชูุงู ุดุฏู!).  

// ---

// ### ๐ป ฺฉุฏ ูุงูุน ุฏุฑ React

// #### ฑ. ุฐุฎุฑู ุชูฺฉูโูุง ุจุนุฏ ุงุฒ ูุงฺฏู
// ุจุนุฏ ุงุฒ ูุงฺฏู:
// const response = await axios.post('/login', { email, password });
// localStorage.setItem('accessToken', response.data.accessToken);
// ุฐุฎุฑู Refresh Token ุฏุฑ ฺฉูฺฉ ุงูู:
// document.cookie = `refreshToken=${response.data.refreshToken}; HttpOnly; Secure`;
// #### ฒ. ุงฺฏุฑ Access Token ูููุถ ุดุฏุ ุจุง Refresh Token ุชูฺฉู ุฌุฏุฏ ุจฺฏุฑ
// import axios from 'axios';

const refreshAccessToken = async () => {
  try {
    // const response = await axios.post('/refresh-token', {
      // refreshToken: getCookie('refreshToken') // ุชุงุจุน ุฎูุงูุฏู ฺฉูฺฉ
    // });
    // localStorage.setItem('accessToken', response.data.accessToken);
    // return response.data.accessToken; // ุชูฺฉู ุฌุฏุฏ
  } catch (error) {
    // ุงฺฏุฑ Refresh Token ูู ูููุถ ุดุฏ:
    window.location.href = '/login'; // ุจุฑู ุจู ุตูุญู ูุงฺฏู
  }
};

// ูุซุงู ุงุณุชูุงุฏู:
// axios.interceptors.response.use(
  // (response) => response,
  // async (error) => {
  //   if (error.response.status === 401) { // ุชูฺฉู ุงุตู ูููุถ ุดุฏู
  //     const newToken = await refreshAccessToken();
  //     error.config.headers.Authorization = `Bearer ${newToken}`;
  //     return axios.request(error.config); // ุฏุฑุฎูุงุณุช ุฑุง ุจุง ุชูฺฉู ุฌุฏุฏ ุชฺฉุฑุงุฑ ฺฉู
  //   }
  //   return Promise.reject(error);
  // }
// );
// ---

// ### โ ฺุฑุง ุงู ููู ุฏุฑุฏุณุฑุ ฺุฑุง ููุท Access Token ุนูุฑ ุทููุงู ูุฏุงุดุชู ุจุงุดูุ
// - ุงููุช: ุงฺฏุฑ ฺฉุณ Access Token ุฑุง ุฏุฒุฏุฏุ ููุท ุชุง ุฒูุงู ุงููุถุง (ูุซูุงู ฑ ุณุงุนุช) ูโุชูุงูุฏ ุงุณุชูุงุฏู ฺฉูุฏ.  
// - ฺฉูุชุฑู: ุณุฑูุฑ ูโุชูุงูุฏ Refresh Token ุฑุง ุจุงุทู ฺฉูุฏ (ูุซูุงู ุงฺฏุฑ ฺฉุงุฑุจุฑ ูุงฺฏุงูุช ฺฉุฑุฏ).  

// ---

// ### โ๏ธ ูฺฉุงุช ุญุงุช
// - Refresh Token ุจุงุฏ ุจุณุงุฑ ุงูู ุฐุฎุฑู ุดูุฏ (ุชุฑุฌุญุงู ุฏุฑ httpOnly Cookie).  
// - **Access Token ุฑุง ุฏุฑ ุญุงูุธู ูุฑุงูุช (ูุซูุงู localStorage) ุฐุฎุฑู ฺฉู**. ูุฑฺฏุฒ JWT ุฑุง ุฏุฑ ฺฉุฏ ูุฑุงูุช ูุฑุงุฑ ูุฏูุฏุฏ** (ูุญุฑูุงูู ูุณุชุ ุงูุง ูุงุจู ุณูุกุงุณุชูุงุฏู ุงุณุช).  

// ---

// ###ููุงุณู ุจุง ุณุณุชู ูุชุฑูุฑู**
// | ููููู | Access Token | Refresh Token |
// |--------|-------------|---------------ูุซุงูุงู** | ุจูุท ฺฉโุจุงุฑ ูุตุฑู | ุงุดุชุฑุงฺฉ ูุงูุงูู ุนูุฑูุฑ** | ฺฉูุชุงู (ฑ ุณุงุนุช) | ุทููุงู (ท ุฑูุฒ) ุฐุฎุฑูโุณุงุฒุฒ** | localStorage | HttpOnly Cookie ุงฺฏุฑ ุฏุฒุฏุฏู ุดุฏุดุฏ** | ุฎุทุฑ ฺฉู (ุนูุฑ ฺฉูุชุงู) | ุฎุทุฑ ุจุงูุง (ุจุงุฏ ููุฑุงู ุจุงุทู ุดูุฏ) |

// -ุญุงูุง ูุชูุฌู ุดุฏ Refresh Token ฺูุูุ** ุงฺฏุฑ ุณูุงู ุฏุงุฑ ุจูพุฑุณ! ๐